# Data Directory

This directory contains all the data files used in the POWERGRID inventory forecasting system, including synthetic data, processed features, and configuration files.

## 📁 Directory Structure

```
data/
├── inventory.csv                    # Current inventory levels
├── features/                        # Processed feature data
│   ├── feature_info.json           # Feature metadata and descriptions
│   └── features.csv                # Engineered features for ML models
└── synthetic/                      # Generated synthetic data
    ├── historical_demand.csv       # Synthetic historical demand data
    ├── inventory.csv               # Synthetic inventory data
    ├── materials.csv               # Synthetic materials master data
    ├── pipeline.csv                # Synthetic pipeline data
    ├── projects.csv                # Synthetic project data
    └── purchase_orders.csv         # Synthetic purchase orders
```

## 📊 Data Files Description

### Core Data Files

#### `inventory.csv`
- **Purpose**: Current inventory levels for all materials
- **Columns**:
  - `material_id`: Unique material identifier
  - `current_stock`: Current stock quantity
  - `unit_cost`: Cost per unit
  - `supplier_id`: Supplier identifier
  - `last_updated`: Last inventory update timestamp

#### `features/features.csv`
- **Purpose**: Engineered features for machine learning models
- **Generated by**: `ml/feature_engineering.py`
- **Contains**: Time-series features, lag features, rolling statistics, seasonal indicators

#### `features/feature_info.json`
- **Purpose**: Metadata about engineered features
- **Contains**:
  - Feature descriptions
  - Data types
  - Statistical properties
  - Feature importance scores

### Synthetic Data Files

All synthetic data files are generated by `ml/synth_generator.py` and follow realistic patterns for POWERGRID operations.

#### `synthetic/historical_demand.csv`
- **Purpose**: Historical demand data for training ML models
- **Columns**:
  - `date`: Demand date
  - `material_id`: Material identifier
  - `project_id`: Associated project
  - `quantity`: Demand quantity
  - `seasonal_factor`: Seasonal demand multiplier

#### `synthetic/materials.csv`
- **Purpose**: Materials master data
- **Columns**:
  - `material_id`: Unique material identifier
  - `material_name`: Human-readable name
  - `category`: Material category (cables, transformers, etc.)
  - `lead_time_days`: Supplier lead time
  - `unit_cost`: Cost per unit
  - `tax_rate`: Applicable tax rate

#### `synthetic/projects.csv`
- **Purpose**: Project information
- **Columns**:
  - `project_id`: Unique project identifier
  - `project_name`: Project name
  - `start_date`: Project start date
  - `end_date`: Project end date
  - `budget`: Total project budget
  - `priority`: Project priority level

#### `synthetic/purchase_orders.csv`
- **Purpose**: Purchase order data
- **Columns**:
  - `po_id`: Purchase order identifier
  - `material_id`: Material being ordered
  - `supplier_id`: Supplier identifier
  - `quantity`: Order quantity
  - `order_date`: Order placement date
  - `expected_delivery`: Expected delivery date

#### `synthetic/pipeline.csv`
- **Purpose**: Project pipeline data
- **Columns**:
  - `project_id`: Project identifier
  - `material_id`: Required material
  - `required_date`: When material is needed
  - `quantity`: Required quantity

## 🔄 Data Flow

1. **Synthetic Data Generation** (`ml/synth_generator.py`)
   - Creates realistic POWERGRID project data
   - Generates time-series demand patterns
   - Produces supplier and material relationships

2. **Data Cleaning** (`ml/data_cleaning.py`)
   - Handles missing values
   - Removes outliers
   - Standardizes formats

3. **Feature Engineering** (`ml/feature_engineering.py`)
   - Creates time-series features
   - Generates lag variables
   - Computes rolling statistics
   - Adds seasonal indicators

4. **Model Training** (Various scripts in `ml/`)
   - Uses processed features for training
   - Outputs predictions to `ml/outputs/`

## 📈 Data Statistics

### Synthetic Data Scale
- **Projects**: ~50 active projects
- **Materials**: ~100 different materials
- **Historical Demand**: ~635K records over 3 years
- **Time Range**: 2022-2025
- **Demand Patterns**: Seasonal, project-driven, maintenance-based

### Feature Engineering
- **Base Features**: Date, material, project, quantity
- **Time Features**: Day of week, month, quarter, year
- **Lag Features**: 1-30 day lags, 7-90 day rolling averages
- **Seasonal Features**: Monthly/quarterly indicators
- **Project Features**: Project phase, budget utilization

## 🛠 Usage

### Loading Data in Python

```python
import pandas as pd

# Load inventory data
inventory_df = pd.read_csv('data/inventory.csv')

# Load synthetic historical demand
demand_df = pd.read_csv('data/synthetic/historical_demand.csv')
demand_df['date'] = pd.to_datetime(demand_df['date'])

# Load engineered features
features_df = pd.read_csv('data/features/features.csv')
feature_info = pd.read_json('data/features/feature_info.json')
```

### Data Validation

```python
# Check data integrity
print(f"Total materials: {inventory_df['material_id'].nunique()}")
print(f"Date range: {demand_df['date'].min()} to {demand_df['date'].max()}")
print(f"Total demand records: {len(demand_df)}")
```

## 📝 Data Quality Notes

### Synthetic Data Characteristics
- **Realistic Patterns**: Based on actual POWERGRID operations
- **Seasonal Variations**: Higher demand during certain months
- **Project Correlations**: Demand spikes during project phases
- **Supplier Diversity**: Multiple suppliers per material category

### Data Quality Checks
- ✅ No missing critical values
- ✅ Consistent date formats
- ✅ Valid material-project relationships
- ✅ Realistic quantity ranges
- ✅ Proper data types

## 🔧 Maintenance

### Updating Synthetic Data
```bash
cd ml
python synth_generator.py
```

### Regenerating Features
```bash
cd ml
python feature_engineering.py
```

### Adding New Data Sources
1. Place CSV files in appropriate subdirectories
2. Update data loading scripts
3. Regenerate features if needed
4. Update this README

## 📋 File Formats

- **CSV Files**: UTF-8 encoded, comma-separated
- **JSON Files**: Standard JSON format for metadata
- **Date Format**: ISO 8601 (YYYY-MM-DD or YYYY-MM-DDTHH:MM:SS)
- **Numeric Precision**: 2 decimal places for costs, integers for quantities

## 🚨 Important Notes

- **Synthetic Data**: All data in `synthetic/` is artificially generated for testing
- **Production Use**: Replace synthetic data with real POWERGRID data
- **Data Privacy**: Ensure sensitive information is properly anonymized
- **Backup**: Regularly backup important data files
- **Version Control**: Track changes to data files and schemas